<html><head><base href="https://GerarReciboOrdemServico.com"><title>Gerar Recibo ou Ordem de Serviço - Documentos Profissionais Personalizados</title><style>
    @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap');
    
    body {
      font-family: 'Roboto', sans-serif;
      line-height: 1.6;
      margin: 0;
      padding: 0;
      background-color: #f0f4f8;
      color: #333;
    }
    .container {
      max-width: 1200px;
      margin: 20px auto;
      padding: 30px;
      background-color: #ffffff;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }
    h2, h3 {
      color: #2c3e50;
      margin-bottom: 20px;
      font-weight: 600;
    }
    .form-group {
      margin-bottom: 25px;
    }
    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #34495e;
    }
    input[type="text"], input[type="number"], input[type="date"], select, textarea {
      width: 100%;
      padding: 12px;
      border: 2px solid #ddd;
      border-radius: 8px;
      font-size: 16px;
      transition: border-color 0.3s ease;
    }
    input[type="text"]:focus, input[type="number"]:focus, input[type="date"]:focus, select:focus, textarea:focus {
      border-color: #3498db;
      outline: none;
    }
    button {
      background-color: #3498db;
      color: white;
      border: none;
      padding: 15px 30px;
      font-size: 18px;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    button:hover {
      background-color: #2980b9;
    }
    #itemsContainer {
      margin-bottom: 20px;
    }
    .item-row {
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
    }
    .item-row input {
      flex: 1;
    }
    .remove-item {
      background-color: #e74c3c;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 5px;
      cursor: pointer;
    }
    .hidden {
      display: none;
    }
  </style></head>
<body>
  <div class="container">
    <h2>Gerar Recibo ou Ordem de Serviço</h2>
    <form id="documentForm">
      <div class="form-group">
        <label for="documentType">Tipo de Documento:</label>
        <select id="documentType" name="documentType" onchange="toggleDocumentFields()">
          <option value="ordemServico">Ordem de Serviço</option>
          <option value="recibo">Recibo</option>
        </select>
      </div>
      <div class="form-group">
        <label for="numeroDocumento">Número do Documento:</label>
        <input type="text" id="numeroDocumento" name="numeroDocumento" required>
      </div>
      <div class="form-group">
        <label for="dataEmissao">Data de Emissão:</label>
        <input type="date" id="dataEmissao" name="dataEmissao" required>
      </div>
      <div class="form-group">
        <label for="nomeEmpresa">Nome da Empresa:</label>
        <input type="text" id="nomeEmpresa" name="nomeEmpresa" value="CEM POR CENTO SERRALHARIA" required>
      </div>
      <div class="form-group">
        <label for="cnpjEmpresa">CNPJ da Empresa:</label>
        <input type="text" id="cnpjEmpresa" name="cnpjEmpresa" value="41.480.208/0001-32" required>
      </div>
      <div class="form-group">
        <label for="telefoneEmpresa">Telefone da Empresa:</label>
        <input type="text" id="telefoneEmpresa" name="telefoneEmpresa" value="(81) 99751-4576" required>
      </div>
      <div class="form-group">
        <label for="nomeCliente">Nome do Cliente:</label>
        <input type="text" id="nomeCliente" name="nomeCliente" required>
      </div>
      <div class="form-group">
        <label for="cnpjCliente">CNPJ do Cliente:</label>
        <input type="text" id="cnpjCliente" name="cnpjCliente" required>
      </div>
      <div class="form-group">
        <label for="enderecoCliente">Endereço do Cliente:</label>
        <input type="text" id="enderecoCliente" name="enderecoCliente" required>
      </div>
      <div id="itemsContainer">
        <h3>Itens do Serviço</h3>
      </div>
      <button type="button" onclick="addItem()">Adicionar Item</button>
      <div class="form-group">
        <label for="valorTotal">Valor Total:</label>
        <input type="number" id="valorTotal" name="valorTotal" step="0.01" readonly>
      </div>
      <div id="reciboFields" class="hidden">
        <div class="form-group">
          <label for="valorPago">Valor Pago:</label>
          <input type="number" id="valorPago" name="valorPago" step="0.01">
        </div>
        <div class="form-group">
          <label for="dataPagamentoRestante">Data para Pagamento do Restante:</label>
          <input type="date" id="dataPagamentoRestante" name="dataPagamentoRestante">
        </div>
      </div>
      <div id="ordemServicoFields">
        <div class="form-group">
          <label for="condicaoPagamento">Condição de Pagamento:</label>
          <input type="text" id="condicaoPagamento" name="condicaoPagamento" required>
        </div>
      </div>
      <div class="form-group">
        <label for="responsavel">Responsável:</label>
        <input type="text" id="responsavel" name="responsavel" required>
      </div>
      <h3>Informações de PIX</h3>
      <div class="form-group">
        <label for="exibirPix">Exibir Pix?</label>
        <select id="exibirPix" name="exibirPix" onchange="togglePixFields()">
          <option value="sim">Sim</option>
          <option value="nao">Não</option>
        </select>
      </div>
      <div id="pixFields">
        <div class="form-group">
          <label for="pixTipo">Tipo de Chave PIX:</label>
          <select id="pixTipo" name="pixTipo">
            <option value="cpf">CPF</option>
            <option value="telefone">Telefone</option>
            <option value="email">E-mail</option>
          </select>
        </div>
        <div class="form-group">
          <label for="pixChave">Chave PIX:</label>
          <input type="text" id="pixChave" name="pixChave" value="064.555.054.09" required>
        </div>
        <div class="form-group">
          <label for="pixNome">Nome do Titular PIX:</label>
          <input type="text" id="pixNome" name="pixNome" value="JADILSON FRANCISCO DA SILVA" required>
        </div>
        <div class="form-group">
          <label for="pixBanco">Banco:</label>
          <input type="text" id="pixBanco" name="pixBanco" value="BANCO INTER" required>
        </div>
      </div>
      <button type="button" onclick="generatePDF()">Gerar PDF</button>
    </form>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.29/jspdf.plugin.autotable.min.js"></script>
  <script>
    let itemCount = 0;

    function toggleDocumentFields() {
      const documentType = document.getElementById('documentType').value;
      const reciboFields = document.getElementById('reciboFields');
      const ordemServicoFields = document.getElementById('ordemServicoFields');

      if (documentType === 'recibo') {
        reciboFields.classList.remove('hidden');
        ordemServicoFields.classList.add('hidden');
      } else {
        reciboFields.classList.add('hidden');
        ordemServicoFields.classList.remove('hidden');
      }
    }

    function togglePixFields() {
      const exibirPix = document.getElementById('exibirPix').value;
      const pixFields = document.getElementById('pixFields');

      if (exibirPix === 'sim') {
        pixFields.classList.remove('hidden');
      } else {
        pixFields.classList.add('hidden');
      }
    }

    function addItem() {
      itemCount++;
      const itemsContainer = document.getElementById('itemsContainer');
      const itemRow = document.createElement('div');
      itemRow.classList.add('item-row');
      itemRow.innerHTML = `
        <input type="text" name="itemDescricao${itemCount}" placeholder="Descrição" required>
        <input type="number" name="itemQuantidade${itemCount}" placeholder="Quantidade" required onchange="calcularTotal()">
        <input type="number" name="itemValor${itemCount}" placeholder="Valor Unitário" step="0.01" required onchange="calcularTotal()">
        <button type="button" class="remove-item" onclick="removeItem(this)">Remover</button>
      `;
      itemsContainer.appendChild(itemRow);
    }

    function removeItem(button) {
      button.parentElement.remove();
      calcularTotal();
    }

    function calcularTotal() {
      let total = 0;
      document.querySelectorAll('.item-row').forEach((row) => {
        const quantidade = parseFloat(row.querySelector('[name^="itemQuantidade"]').value) || 0;
        const valor = parseFloat(row.querySelector('[name^="itemValor"]').value) || 0;
        total += quantidade * valor;
      });
      document.getElementById('valorTotal').value = total.toFixed(2);
    }

    function generatePDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      const documentType = document.getElementById('documentType').value;
      const title = documentType === 'recibo' ? 'RECIBO' : 'ORÇAMENTO';

      doc.setFontSize(18);
      doc.setFont("helvetica", "bold");
      doc.text(`${title} #` + document.getElementById('numeroDocumento').value, 105, 20, null, null, "center");
      
      doc.setFontSize(10);
      doc.setFont("helvetica", "normal");
      doc.text("Emitido em: " + document.getElementById('dataEmissao').value, 105, 30, null, null, "center");

      doc.setFontSize(12);
      doc.setFont("helvetica", "bold");
      doc.text(document.getElementById('nomeEmpresa').value, 20, 40);
      doc.setFont("helvetica", "normal");
      doc.text("CNPJ: " + document.getElementById('cnpjEmpresa').value, 20, 46);
      doc.text("Tel: " + document.getElementById('telefoneEmpresa').value, 20, 52);

      doc.setFont("helvetica", "bold");
      doc.text("CLIENTE:", 20, 65);
      doc.setFont("helvetica", "normal");
      doc.text(document.getElementById('nomeCliente').value, 20, 71);
      doc.text("CNPJ: " + document.getElementById('cnpjCliente').value, 20, 77);
      doc.text(document.getElementById('enderecoCliente').value, 20, 83);

      const items = [];
      document.querySelectorAll('.item-row').forEach((row, index) => {
        items.push([
          row.querySelector(`[name^="itemDescricao"]`).value,
          row.querySelector(`[name^="itemQuantidade"]`).value,
          "R$ " + parseFloat(row.querySelector(`[name^="itemValor"]`).value).toFixed(2),
          "R$ " + (row.querySelector(`[name^="itemQuantidade"]`).value * row.querySelector(`[name^="itemValor"]`).value).toFixed(2)
        ]);
      });

      doc.autoTable({
        startY: 90,
        head: [['Descrição', 'Quantidade', 'Valor Unitário', 'Subtotal']],
        body: items,
        theme: 'grid',
        styles: { fontSize: 8, cellPadding: 2 },
        headStyles: { fillColor: [52, 152, 219] }
      });

      const finalY = doc.lastAutoTable.finalY || 150;
      doc.setFontSize(12);
      doc.setFont("helvetica", "bold");
      doc.text("TOTAL: R$ " + document.getElementById('valorTotal').value, 150, finalY + 10, null, null, "right");

      if (documentType === 'recibo') {
        doc.setFont("helvetica", "normal");
        doc.text("Valor Pago: R$ " + document.getElementById('valorPago').value, 20, finalY + 20);
        doc.text("Data para Pagamento do Restante: " + document.getElementById('dataPagamentoRestante').value, 20, finalY + 30);
      } else {
        doc.setFont("helvetica", "normal");
        doc.text("Condição de Pagamento: " + document.getElementById('condicaoPagamento').value, 20, finalY + 20);
      }

      doc.setFont("helvetica", "bold");
      doc.text("Responsável:", 20, finalY + 40);
      doc.line(20, finalY + 50, 100, finalY + 50);
      doc.setFont("helvetica", "normal");
      doc.text(document.getElementById('responsavel').value, 20, finalY + 55);

      // Adicionar informações de PIX
      if (document.getElementById('exibirPix').value === 'sim') {
        doc.setFont("helvetica", "bold");
        doc.text("Informações de PIX:", 20, finalY + 70);
        doc.setFont("helvetica", "normal");
        doc.text("Tipo: " + document.getElementById('pixTipo').value, 20, finalY + 80);
        doc.text("Chave: " + document.getElementById('pixChave').value, 20, finalY + 90);
        doc.text("Nome: " + document.getElementById('pixNome').value, 20, finalY + 100);
        doc.text("Banco: " + document.getElementById('pixBanco').value, 20, finalY + 110);
      }

      doc.save(`${title}_` + document.getElementById('numeroDocumento').value + ".pdf");
    }

    function setDefaultValues() {
      const today = new Date();
      const dd = String(today.getDate()).padStart(2, '0');
      const mm = String(today.getMonth() + 1).padStart(2, '0');
      const yyyy = today.getFullYear();

      document.getElementById('numeroDocumento').value = dd + mm + yyyy;
      document.getElementById('dataEmissao').value = yyyy + '-' + mm + '-' + dd;
    }

    // Adicionar um item inicial e definir valores padrão quando a página carregar
    window.onload = function() {
      addItem();
      setDefaultValues();
      toggleDocumentFields();
      togglePixFields();
    };
  </script>
</body></html>
